<div class="progress"
     *ngIf="loading">
    <div class="progress-bar progress-bar-striped progress-bar-animated"
         role="progressbar"
         aria-valuenow="75"
         aria-valuemin="0"
         aria-valuemax="100"
         style="width: 100%">
        Loading...</div>
</div>

<div class="container">
    <div class="row">
        <h1>Edit {{userType}} details</h1>
    </div>
    <br>
    <br>
    <div class="row">
        <p>{{errorMessage}}</p>
    </div>

    <form (ngSubmit)="onSubmit()"
          #f="ngForm">
        <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <label for="name">{{userType}} name</label>
                    <input type="text"
                           class="form-control"
                           name="name"
                           id="name"
                           placeholder="{{userType}} name"
                           [(ngModel)]="user.name"
                           required
                           minlength="5"
                           #n='ngModel'>
                    <p *ngIf="!n.valid && n.touched">
                        You must insert a name of at least 5 letters</p>
                    <br>
                </div>

                <div class="form-group">
                    <label for="name">{{userType}} mail</label>
                    <input type="email"
                           class="form-control"
                           name="email"
                           id="email"
                           placeholder="{{userType}} mail"
                           [(ngModel)]="user.email"
                           required
                           minlength="5"
                           email
                           #e='ngModel'>
                    <p *ngIf="!e.valid && e.touched">
                        Please enter your Real Email</p>
                    <br>
                </div>

                <div class="form-group">
                    <label for="oldPassword">Old password</label>
                    <input type="password"
                           class="form-control"
                           name="oldPassword"
                           id="oldPassword"
                           placeholder="Old password"
                           [(ngModel)]="user.password"
                           required
                           #old='ngModel'>
                    <p *ngIf="!old.valid && old.touched">
                        Please enter your original password</p>
                    <br>
                </div>

                <div class="form-group">
                    <label for="newPassword">New password (If you don't want to change type the old one)</label>
                    <input type="password"
                           class="form-control"
                           name="newPassword"
                           id="newPassword"
                           placeholder="New password"
                           [(ngModel)]="user.editedPassword"
                           required
                           minlength="8"
                           #new='ngModel'>
                    <p *ngIf="!new.valid && new.touched">
                        Must contain at least 8 or more characters</p>
                    <br>
                </div>

                <div class="form-group">
                    <label for="name">Confirm new password (If you don't want to change type the old one)</label>
                    <input type="password"
                           class="form-control"
                           name="confirm"
                           id="confirm"
                           placeholder="Confirm new password"
                           [(ngModel)]="user.confirmPassword"
                           required
                           pattern="{{new.value}}"
                           #confirmed='ngModel'>
                    <p *ngIf="!confirmed.valid && confirmed.touched">
                        There is no match!</p>
                    <br>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="btn-group"
                 role="group">
                <button class="btn btn-success"
                        [disabled]="!f.valid"
                        type="submit">Edit {{userType}} details</button>
                <button class="btn btn-secondary"
                        [routerLink]="['/user']"
                        type="button">Cancel</button>
            </div>
        </div>
    </form>
</div>